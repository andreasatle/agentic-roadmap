<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document Writer</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <h1>Document Writer</h1>

    <section id="intent-upload" data-phase="intent">
        <h2>Upload / Paste Intent YAML</h2>
        <p>Load an existing IntentEnvelope (optional).</p>
        <input type="file" id="intent-file" />
    </section>

    <section id="intent-form" data-phase="intent">
        <h2>Intent Form</h2>
        <div class="field-group">
            <label for="document-goal">Document Goal</label>
            <input type="text" id="document-goal" />
        </div>
        <div class="field-group">
            <label for="audience">Audience</label>
            <input type="text" id="audience" />
        </div>
        <div class="field-group">
            <label for="tone">Tone</label>
            <input type="text" id="tone" />
        </div>
        <div class="field-group">
            <label for="required-sections">Required Sections</label>
            <textarea id="required-sections"></textarea>
        </div>
        <div class="field-group">
            <label for="forbidden-sections">Forbidden Sections</label>
            <textarea id="forbidden-sections"></textarea>
        </div>
        <div class="field-group">
            <label for="must-include">Must Include</label>
            <textarea id="must-include"></textarea>
        </div>
        <div class="field-group">
            <label for="must-avoid">Must Avoid</label>
            <textarea id="must-avoid"></textarea>
        </div>
        <div class="field-group">
            <label for="required-mentions">Required Mentions</label>
            <textarea id="required-mentions"></textarea>
        </div>
        <div class="field-group">
            <label for="humor-level">Humor Level</label>
            <input type="text" id="humor-level" />
        </div>
        <div class="field-group">
            <label for="formality">Formality</label>
            <input type="text" id="formality" />
        </div>
        <div class="field-group">
            <label for="narrative-voice">Narrative Voice</label>
            <input type="text" id="narrative-voice" />
        </div>
        <section id="save-intent" data-phase="intent">
            <h2>Save Intent</h2>
            <div class="save-row">
                <input
                  type="text"
                  id="intent-filename"
                  placeholder="intent.yaml"
                  aria-label="Intent filename"
                />
                <button id="save-intent-btn" onclick="saveIntent()">Save Intent</button>
            </div>
        </section>
        <div class="field-group">
            <button onclick="generateDocument()">Generate Document</button>
        </div>
    </section>

    <section id="generate-document" data-phase="structure">
        <h2>Generate Document</h2>
        <button onclick="generateDocument()">Generate Article</button>
    </section>

    <section id="article-output" data-phase="content">
        <h2>Article Output</h2>
        <div id="article-text"></div>
    </section>

    <section id="save-article" data-phase="content">
        <h2>Save Article</h2>
        <div class="save-row">
            <input
                type="text"
                id="article-filename"
                placeholder="article.md"
                aria-label="Article filename"
            />
            <button onclick="saveDocument()">Save Article</button>
        </div>
    </section>

    <section id="errors" data-phase="export">
        <pre id="error-area"></pre>
    </section>

    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="/static/app.js"></script>
</body>
</html>
